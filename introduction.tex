\section{Introduction}
% 
% Some journals put the first two words in caps:
% \IEEEPARstart{T}{his demo} file is ....
% 
% Here we have the typical use of a "T" for an initial drop letter
% and "HIS" in caps to complete the first word.
\IEEEPARstart{C}{\MakeLowercase{onstrained}} devices are an essential part of Internet of Things (IoT) and therefore there is focus on developing lightweight protocols which enables different connectivity models for constrained devices.  
CoAP is one of the emerging lightweight application protocol which is designed for machine-to-machine (M2M) applications for use in constrained environments.   

Previously a research has been done in the IoTivity framework which operates as a middleware trying to solve interoperability issues in the IoT \cite{interoperabilityChallenge}. Results from the research shows that IoTivity does not have the capability to communicate with the cloud in an appropriate way. 

IoTivity made use of the CoAP protocol as the only application protocol. 
A new version of the IoTivity framework has been published recently, where they have implemented a solution to connect IoT devices to the Cloud \cite{iotivity1.1}. The solution was based on a newer draft for CoAP \cite{coapTCP} which presents a modified CoAP that runs over TCP instead of UDP \cite{coapUDP}.

\begin{quote}
	"Compared with UDP protocol, TCP protocol is more complex which makes it not easy to employ on resource-constrained devices. Now, most of IoT use UDP protocol." \cite{TCPvsUDP}
\end{quote}
In the original version of CoAP, UDP was chosen as a transport protocol and therefore it was unexpected to see a draft from CoAP where TCP is chosen as a transport protocol instead of UDP.
IETF has published a draft in July 2014 presenting a publish-subscribe broker that can be used between CoAP clients. An advantage with the publish-subscribe paradigm is that the constrained devices can avoid to function as servers and can thereby sleep the most of time.

CoAP is a reasonable choice for Device-to-Device communication,  but it is also a possible choice for Device-to-Cloud communication though it has some limitations which are handled differently by the three CoAP setups.

The purpose of this paper is to find the most optimal way for connecting constrained devices to the Cloud by investigating and comparing the three different presented variations of the CoAP protocol. The rest of this paper is structured as follows.  Section 2 presents... . Section 3 ... . Section 4 discusses the results ... . Section 5 concludes the paper.     

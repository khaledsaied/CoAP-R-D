\section{Introduction}
Introduction: Previously we have done research in the IoTivity framework and found out that it does not support Device-to-Cloud communication [ref]. IoTivity made use of CoAP which is a M2M communication protocol developed specifically for constrained devices. The used CoAP protocol was build on top of UDP [ref]. A new version of the IoTivity framework has been published recently, where they have implemented a solution to connect IoT devices to the Cloud [ref]. The solution was based on a newer draft for CoAP which presents a modified CoAP that runs over TCP. “Compared with UDP protocol, TCP protocol is more complex which makes it not easy to employ on resource-constrained devices. Now, most of IoT use UDP protocol.” [ref] In the original version of CoAP [ref], UDP was chosen as a transport protocol and therefore it was unexpected to see a draft from CoAP where TCP is chosen as a transport protocol instead of UDP. IETF has published a draft in July 2014 presenting a publish-subscribe broker that can be used between CoAP clients. An advantage with the publish-subscribe paradigm is that the constrained devices can avoid to function as servers and can thereby sleep the most of time. CoAP is a reasonable choice for Device-to-Device communication, but it is also a possible choice for Device-to-Cloud communication though it has some limitations which are handled differently by the three CoAP setups. The purpose of this paper is to find the most optimal way for connecting constrained devices to the Cloud by investigating and comparing the three different presented variations of the CoAP protocol. The rest of this paper is structured as follows. Section 2 presents … . Section 3 …. . Section 4 discusses the results… . Section 5 concludes the paper.